var inputs=document.querySelectorAll("input[type=text]");inputs.forEach(function(e){e.onkeyup=function(){this.value=this.value.trim()}});var htmlHref=window.location.href,addr=(htmlHref=htmlHref.replace(/^http:\/\/[^/]+/,"")).substr(htmlHref.lastIndexOf("/",htmlHref.lastIndexOf("/")-1)+1),index=addr.lastIndexOf("/"),id=decodeURI(addr.substring(index+1,addr.length)),username=localStorage.getItem("username");function reply(o,s,i){$("#form").css("display","none"),$(".table form").css("display","none"),$("#"+o).show(),$("#"+o).on("submit",function(e){var t=$("#"+o+" input[type=text]").val(),a=$("#"+o+" .form-control").val(),n=$("#"+o+" select[name=face]").val();return new PostComment(s,t,n,a).replyData(i,o),e.preventDefault(),!1})}function PostComment(e,t,a,n){this.user_id=e||"",this.user_name=t.replace(/做爱|黄色|日|妈|操|gay|fuck/gi,"**"),this.face=a,this.time=(new Date).toLocaleString(),this.content=n.replace(/做爱|黄色|日|妈|操|gay|fuck/gi,"**")}function ajax(e,t,a,n){$.ajax({type:"POST",url:e,data:t,success:a,error:n})}username?$("#name").val(username):$("#name").val(""),$("#form").on("submit",function(e){var t=$("input[name=name]").val(),a=$("#form-control").val();return new PostComment(null,t,$("select[name=face]").val(),a).commentData(),e.preventDefault(),!1}),PostComment.prototype.validateData=function(){return!!this.content.replace(/ +/g,"").replace(/[\r\n]/g,"")||(alert("请输入内容！"),!1)},PostComment.prototype.commentData=function(){if(!this.validateData())return!1;var t=this;ajax("/article/"+id,{name:this.user_name,content:this.content,time:this.time,face:this.face},function(e){if(200!==e.status)return alert("非法错误！"),!1;localStorage.setItem("username",t.user_name),e='<tr><td><div class="touxiang"><img src="'.concat(e.message.face,'" alt="人物头像" width="50" height="50"><div>').concat(e.message.name,'</div></div><div class="content">').concat(e.message.content,"<br><small>").concat(e.message.time,"</small></div></td></tr>"),$(".toast").toast("show"),$(".table tbody").prepend(e),$("#form-control").val(""),$("input[name=name]").val("")})},PostComment.prototype.replyData=function(t,a){if(!this.validateData())return!1;var n=this;ajax("/reply?id="+n.user_id+"&blog_id="+id,{name:this.user_name,content:this.content,time:this.time,face:this.face,reply_name:t},function(e){if(200!==e.status)return alert("非法错误！"),!1;$("#"+n.user_id).parent().append('<div class="hf"><div class="reply_area"><span class="reply_info"><img src="'.concat(e.message.replyface,'" alt="人物头像" width="50" height="50"> <span>').concat(e.message.replyname,'<span class="text-info">&nbsp;回复&nbsp;</span><span></span>').concat(t,':</span></span><span class="reply_content">').concat(e.message.replycomment,"<br><small>").concat(e.message.replytime,"</small></span></div></div>")),$(".toast").toast("show"),$("#"+a+"reply").val(""),$("#"+a+"name").val(""),$("#"+a).hide()})},$(function(){var e,t;e=document.querySelector(".profile-image"),(t=new Image).src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t.onload=function(){0<t.width&&0<t.height||(e.src="/public/home/dev/images/win10狗头.jpg")},t.onerror=function(){e.src="/public/home/dev/images/win10狗头.jpg"},$("#config-trigger").click(function(e){e.preventDefault(),$(this).hasClass("config-panel-open")?($("#config-panel").animate({right:"-=190"},500),$(this).removeClass("config-panel-open").addClass("config-panel-hide")):($("#config-panel").animate({right:"+=190"},500),$(this).removeClass("config-panel-hide").addClass("config-panel-open"))}),$("#config-close").on("click",function(e){e.preventDefault(),$("#config-trigger").click()}),(-1!==location.href.indexOf("list")?$(".navbar-nav > .nav-item:nth-child(2)"):$(".navbar-nav > .nav-item:nth-child(1)")).addClass("active");var o,a=location.search;a&&-1!==a.indexOf("?search")&&(o=decodeURIComponent(a.split("?search=")[1]),0!==$(".title a").length?$(".title a").each(function(e,t){var a=$(t).html(),n=new RegExp(o,"gi"),a=a.match(n).reduce(function(e,t){return e.replace(t,'<mark class="highlightTitle">'+t+"</mark>")},a);$(t).html(a)}):$(".blog-list > .container").text("空空如也，世界变得清净了~"));var n=["#5ecca9","#3b7eeb","#eea73b","#6c51a4"],s=localStorage.getItem("color"),a=$("#color-options .list-inline-item");switch(a.click(function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).index(),e=n[e];$(".header").css("backgroundColor",e),$(".nav-link").css("backgroundColor",e),$(".more-link").css("color",e),$(".list-inline-item a").css("color",e),$(".btn-primary").css({backgroundColor:e,borderColor:e}),localStorage.setItem("color",e)}),s){case n[0]:a.eq(0).addClass("active");break;case n[1]:a.eq(1).addClass("active");break;case n[2]:a.eq(2).addClass("active");break;case n[3]:a.eq(3).addClass("active");break;default:a.eq(0).addClass("active")}var i=$(".logo");Array.prototype.slice.call(i.text()).reduce(function(e,t,a){e===a&&i.html("");a=document.createElement("span"),a=$(a);a.html(t),i.append(a),a.on("mouseover",function(){$(this).addClass("color")}),a.on("animationend",function(){$(this).removeClass("color")})},0);var c=$(window).height(),r=$(".top");$(document).on("scroll",function(){$(document).scrollTop()>=c/2?r.fadeIn():r.fadeOut()}),r.on("click",function(){$("body ,html").stop().animate({scrollTop:0})});var l={threshold:1,rootMargin:"0px"};$(".item img").each(function(e,t){new IntersectionObserver(function(e,a){e.forEach(function(e){var t;e.isIntersecting&&(t=e.target,e=$(t).attr("data-src"),$(t).attr("src",e),a.disconnect())})},l).observe(t)})});